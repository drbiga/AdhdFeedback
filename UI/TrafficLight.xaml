<Window x:Class="UI.TrafficLightWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:converters="clr-namespace:UI.Converters"
        WindowStyle="None"
        ResizeMode="NoResize"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        SizeToContent="WidthAndHeight">

    <Window.Resources>
        <!-- shared light style -->
        <Style x:Key="Light" TargetType="Ellipse">
            <Setter Property="Width" Value="50"/>
            <Setter Property="Height" Value="50"/>
            <Setter Property="Margin" Value="8"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="#aaa" Direction="320" ShadowDepth="2" BlurRadius="5" Opacity="0.5"/>
                </Setter.Value>
            </Setter>
        </Style>
        <RadialGradientBrush x:Key="RedBrush" GradientOrigin="0.3,0.3" Center="0.5,0.5" RadiusX="0.5" RadiusY="0.5">
            <GradientStop Color="#faa" Offset="0"/>
            <GradientStop Color="#f00" Offset="1"/>
        </RadialGradientBrush>
        <RadialGradientBrush x:Key="YellowBrush" GradientOrigin="0.3,0.3" Center="0.5,0.5" RadiusX="0.5" RadiusY="0.5">
            <GradientStop Color="#ffa" Offset="0"/>
            <GradientStop Color="#aa1" Offset="1"/>
        </RadialGradientBrush>
        <RadialGradientBrush x:Key="GreenBrush" GradientOrigin="0.3,0.3" Center="0.5,0.5" RadiusX="0.5" RadiusY="0.5">
            <GradientStop Color="#afa" Offset="0"/>
            <GradientStop Color="#3c3" Offset="1"/>
        </RadialGradientBrush>
        <RadialGradientBrush x:Key="GrayBrush" GradientOrigin="0.3,0.3" Center="0.5,0.5" RadiusX="0.5" RadiusY="0.5">
            <GradientStop Color="#aaa" Offset="0"/>
            <GradientStop Color="#333" Offset="1"/>
        </RadialGradientBrush>

        <!-- Converter -->
        <converters:TrafficLightColorToBrushConverter x:Key="TrafficLightConverter"/>
        <!--<converters:TrafficLightStatusIamSessionConverter x:Key="StatusIamSessionConverter" />-->

        <!-- shared button style -->
        <Style x:Key="FlatButton" TargetType="Button">
            <Setter Property="Background" Value="#111"/>
            <Setter Property="Foreground" Value="#eee"/>
            <Setter Property="BorderBrush" Value="#333"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="5"/>
            <Setter Property="Cursor" Value="Arrow"/>

            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="b"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="3"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>

                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Trigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <ColorAnimation
                                    Storyboard.TargetProperty="(Button.Background).(SolidColorBrush.Color)"
                                    To="#555"
                                    Duration="0:0:0.1"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>
                                <Trigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <ColorAnimation
                                    Storyboard.TargetProperty="(Button.Background).(SolidColorBrush.Color)"
                                    To="#111"
                                    Duration="0:0:0.1"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.ExitActions>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Cursor" Value="Hand"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <StackPanel Grid.Row="0" x:Name="RootComponent" HorizontalAlignment="Center">
            <Border Background="#111" CornerRadius="5">
                <Border.Style>
                    <Style TargetType="Border">
                        <Setter Property="Effect">
                            <Setter.Value>
                                <DropShadowEffect Color="#fff" Direction="0" ShadowDepth="0" Opacity="0.25" BlurRadius="15" />
                            </Setter.Value>
                        </Setter>
                    </Style>
                </Border.Style>
                <!-- 3-lamp traffic light -->
                <StackPanel x:Name="TrafficLight" Orientation="Vertical" Margin="5">
                    <Ellipse x:Name="RedLight" Style="{StaticResource Light}">
                        <Ellipse.Fill>
                            <MultiBinding Converter="{StaticResource TrafficLightConverter}" ConverterParameter="Red">
                                <Binding Path="CurrentLight"/>
                                <Binding Source="{StaticResource RedBrush}"/>
                                <Binding Source="{StaticResource GrayBrush}"/>
                            </MultiBinding>
                        </Ellipse.Fill>
                    </Ellipse>
                    <Ellipse x:Name="YellowLight" Style="{StaticResource Light}" >
                        <Ellipse.Fill>
                            <MultiBinding Converter="{StaticResource TrafficLightConverter}" ConverterParameter="Yellow">
                                <Binding Path="CurrentLight"/>
                                <Binding Source="{StaticResource YellowBrush}"/>
                                <Binding Source="{StaticResource GrayBrush}"/>
                            </MultiBinding>
                        </Ellipse.Fill>
                    </Ellipse>
                    <Ellipse x:Name="GreenLight" Style="{StaticResource Light}">
                        <Ellipse.Fill>
                            <MultiBinding Converter="{StaticResource TrafficLightConverter}" ConverterParameter="Green">
                                <Binding Path="CurrentLight"/>
                                <Binding Source="{StaticResource GreenBrush}"/>
                                <Binding Source="{StaticResource GrayBrush}"/>
                            </MultiBinding>
                        </Ellipse.Fill>
                    </Ellipse>
                </StackPanel>
            </Border>

            <!-- button -->
            <Button
            Style="{StaticResource FlatButton}"
            Margin="0,10,0,0"
            Click="Button_Click"
        >
                Click to Move
            </Button>
        </StackPanel>

        <Border Grid.Row="1" HorizontalAlignment="Stretch" Background="#111" 
        CornerRadius="4" 
        Padding="10" 
        Margin="0,10,0,0">
            <Border.Style>
                <Style TargetType="Border">
                    <Setter Property="Visibility" Value="Collapsed" />
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsReady}" Value="True">
                            <Setter Property="Visibility" Value="Collapsed" />
                        </DataTrigger>
                        <DataTrigger Binding="{Binding IsReady}" Value="False">
                            <Setter Property="Visibility" Value="Visible" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Border.Style>

            <StackPanel>
                <TextBlock
                    Text="Warning"
                    TextWrapping="Wrap" 
                    MaxWidth="150"
                    FontSize="16"
                    Foreground="#FF4444"
                    HorizontalAlignment="Center"
                    FontWeight="Bold"
                    Margin="0 0 0 10"
                    />
                <TextBlock
                    Text="Your user is not yet set in the traffic light."
                    TextWrapping="Wrap" 
                    MaxWidth="200"
                    Foreground="#FF4444"
                    HorizontalAlignment="Left" 
                    FontWeight="Normal"/>
                <TextBlock
                    Text="Please log into the web app or log out and log back in"
                    TextWrapping="Wrap" 
                    MaxWidth="200"
                    Foreground="#FF4444"
                    HorizontalAlignment="Left" 
                    FontWeight="Bold"
                    FontStyle="Italic"
                    Margin="00 10 0 10"
                    />
                <TextBlock
                    Text="Once the user is set, this text will disappear"
                    TextWrapping="Wrap" 
                    MaxWidth="200"
                    Foreground="#FF4444"
                    HorizontalAlignment="Left" 
                    FontWeight="Normal"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>

    